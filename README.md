

# libDatabox
`import "."`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>
A golang library for interfacing with Databox APIs.

Install using go get github.com/me-box/lib-go-databox

Examples can be found in the samples directory




## <a name="pkg-index">Index</a>
* [func ExportLongpoll(destination string, payload string) (string, error)](#ExportLongpoll)
* [func GetDsIdFromDsHref(href string) string](#GetDsIdFromDsHref)
* [func GetHttpsCredentials() string](#GetHttpsCredentials)
* [func GetStoreURLFromDsHref(href string) string](#GetStoreURLFromDsHref)
* [func JsonUnmarshal(s string) map[string]interface{}](#JsonUnmarshal)
* [func RegisterDatasource(href string, metadata StoreMetadata) (string, error)](#RegisterDatasource)
* [func StoreJSONGetlatest(href string) (string, error)](#StoreJSONGetlatest)
* [func StoreJSONWriteKV(href string, data string) error](#StoreJSONWriteKV)
* [func StoreJSONWriteTS(href string, data string) error](#StoreJSONWriteTS)
* [func StoreJSONreadKV(href string, key string) (string, error)](#StoreJSONreadKV)
* [func StoreTsLast(href string, n int) (string, error)](#StoreTsLast)
* [func StoreTsLastNrange(href string, n int, startTimestamp int, endTimestamp int) (string, error)](#StoreTsLastNrange)
* [func StoreTsLastNsince(href string, n int, startTimestamp int) (string, error)](#StoreTsLastNsince)
* [func StoreTsLatest(href string) (string, error)](#StoreTsLatest)
* [func StoreTsRange(href string, startTimestamp int, endTimestamp int) (string, error)](#StoreTsRange)
* [func StoreTsSince(href string, startTimestamp int) (string, error)](#StoreTsSince)
* [func StoreTsWrite(href string, data string) (string, error)](#StoreTsWrite)
* [func WSConnect(href string) (chan []byte, error)](#WSConnect)
* [func WSSubscribe(href string, storeType string) (string, error)](#WSSubscribe)
* [func WSUnsubscribe(href string, storeType string) (string, error)](#WSUnsubscribe)
* [func WaitForStoreStatus(href string)](#WaitForStoreStatus)
* [type StoreMetadata](#StoreMetadata)


#### <a name="pkg-files">Package files</a>
[store-json.go](/src/target/store-json.go) [store-timeseries.go](/src/target/store-timeseries.go) [subscriptions.go](/src/target/subscriptions.go) [utils.go](/src/target/utils.go) 





## <a name="ExportLongpoll">func</a> [ExportLongpoll](/src/target/store-json.go?s=102:173#L1)
``` go
func ExportLongpoll(destination string, payload string) (string, error)
```


## <a name="GetDsIdFromDsHref">func</a> [GetDsIdFromDsHref](/src/target/utils.go?s=2346:2388#L89)
``` go
func GetDsIdFromDsHref(href string) string
```
GetDsIdFromDsHref extracts the base data source ID from the href provied in the DATASOURCE_[name] environment variable.



## <a name="GetHttpsCredentials">func</a> [GetHttpsCredentials](/src/target/utils.go?s=1573:1606#L59)
``` go
func GetHttpsCredentials() string
```
GetHttpsCredentials Returns a string containing the HTTPS credentials to pass to https server when offering an https server.
These are read form /run/secrets/DATABOX.pem and are generated by the container-manger at run time.



## <a name="GetStoreURLFromDsHref">func</a> [GetStoreURLFromDsHref](/src/target/utils.go?s=2074:2120#L77)
``` go
func GetStoreURLFromDsHref(href string) string
```
GetStoreURLFromDsHref extracts the base store url from the href provied in the DATASOURCE_[name] environment variable.



## <a name="JsonUnmarshal">func</a> [JsonUnmarshal](/src/target/utils.go?s=1764:1815#L65)
``` go
func JsonUnmarshal(s string) map[string]interface{}
```
JsonUnmarshal is a helper function to translate JSON sstringified environment variable
to go map[string]



## <a name="RegisterDatasource">func</a> [RegisterDatasource](/src/target/utils.go?s=6070:6146#L259)
``` go
func RegisterDatasource(href string, metadata StoreMetadata) (string, error)
```
RegisterDatasource is used by apps and drivers to register datasource in stores they
own.



## <a name="StoreJSONGetlatest">func</a> [StoreJSONGetlatest](/src/target/store-json.go?s=359:411#L6)
``` go
func StoreJSONGetlatest(href string) (string, error)
```


## <a name="StoreJSONWriteKV">func</a> [StoreJSONWriteKV](/src/target/store-json.go?s=689:742#L28)
``` go
func StoreJSONWriteKV(href string, data string) error
```


## <a name="StoreJSONWriteTS">func</a> [StoreJSONWriteTS](/src/target/store-json.go?s=532:585#L17)
``` go
func StoreJSONWriteTS(href string, data string) error
```


## <a name="StoreJSONreadKV">func</a> [StoreJSONreadKV](/src/target/store-json.go?s=846:907#L39)
``` go
func StoreJSONreadKV(href string, key string) (string, error)
```


## <a name="StoreTsLast">func</a> [StoreTsLast](/src/target/store-timeseries.go?s=298:350#L13)
``` go
func StoreTsLast(href string, n int) (string, error)
```


## <a name="StoreTsLastNrange">func</a> [StoreTsLastNrange](/src/target/store-timeseries.go?s=708:804#L31)
``` go
func StoreTsLastNrange(href string, n int, startTimestamp int, endTimestamp int) (string, error)
```


## <a name="StoreTsLastNsince">func</a> [StoreTsLastNsince](/src/target/store-timeseries.go?s=475:553#L22)
``` go
func StoreTsLastNsince(href string, n int, startTimestamp int) (string, error)
```


## <a name="StoreTsLatest">func</a> [StoreTsLatest](/src/target/store-timeseries.go?s=130:177#L2)
``` go
func StoreTsLatest(href string) (string, error)
```


## <a name="StoreTsRange">func</a> [StoreTsRange](/src/target/store-timeseries.go?s=1186:1270#L49)
``` go
func StoreTsRange(href string, startTimestamp int, endTimestamp int) (string, error)
```


## <a name="StoreTsSince">func</a> [StoreTsSince](/src/target/store-timeseries.go?s=981:1047#L40)
``` go
func StoreTsSince(href string, startTimestamp int) (string, error)
```


## <a name="StoreTsWrite">func</a> [StoreTsWrite](/src/target/store-timeseries.go?s=1432:1491#L59)
``` go
func StoreTsWrite(href string, data string) (string, error)
```


## <a name="WSConnect">func</a> [WSConnect](/src/target/subscriptions.go?s=290:338#L5)
``` go
func WSConnect(href string) (chan []byte, error)
```
WSConnect connects to a target store's notification service

Returns a chan []byte that recives data from every route the connecting container is subscribed to.
Data is a JSON string.



## <a name="WSSubscribe">func</a> [WSSubscribe](/src/target/subscriptions.go?s=1382:1445#L56)
``` go
func WSSubscribe(href string, storeType string) (string, error)
```
WSSubscribe Subscribes the caller to write notifications for a given route.



## <a name="WSUnsubscribe">func</a> [WSUnsubscribe](/src/target/subscriptions.go?s=1717:1782#L66)
``` go
func WSUnsubscribe(href string, storeType string) (string, error)
```
WSUnsubscribe Unsubscribes the caller to write notifications for a given route



## <a name="WaitForStoreStatus">func</a> [WaitForStoreStatus](/src/target/utils.go?s=5241:5277#L217)
``` go
func WaitForStoreStatus(href string)
```
WaitForStoreStatus will wait for the store available at href to respond with an active status.




## <a name="StoreMetadata">type</a> [StoreMetadata](/src/target/utils.go?s=5608:5842#L237)
``` go
type StoreMetadata struct {
    Description    string
    ContentType    string
    Vendor         string
    DataSourceType string
    DataSourceID   string
    StoreType      string
    IsActuator     bool
    Unit           string
    Location       string
}
```













- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
